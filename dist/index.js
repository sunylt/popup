/*! build date: 2016-12-20 00:56 by Tony */
!function(a,b){"function"==typeof define?define("~/popup/1.0.0/index",["jquery"],function(a){var c=a("jquery");return b(c)}):a.Popup=b(a.jQuery||a.$)}(this,function(a){function b(){this._createPopup(),this._attachEvents()}function c(){var a=0;for(var c in i){var e=i[c];e._visible&&e.config.mask&&a++}a>0?(b._MASK||(b._MASK=d()),b._MASK.show()):b._MASK&&b._MASK.hide()}function d(b){var c={width:"100%",height:"100%",position:"fixed",opacity:.5,"background-color":"#000000",left:0,top:0,right:0,bottom:0},d=b?'class="'+b+'"':"";return a("<div "+d+" />").css(c).appendTo(f)}var e=document,f=e.body,g=a(window),h=a(e),i={},j=b.prototype;return j._visible=!1,j.init=function(a){var b=this,c=b.DOM;return c.main.attr("id",a.id),c.close[a.closeButton?"show":"hide"](),b.config=a,b.title(a.title),b.content(a.content),b.button(a.button),b.size(a.width,a.height),b.position(),b},j.title=function(a){var b=this.DOM.title;return a===!1?b.empty().hide():b.html(a).show(),this},j.content=function(a){return this.DOM.content.empty()["object"==typeof a?"append":"html"](a),this},j.button=function(c){var d=this,e=d.DOM.footer,c=c||[],f="",g=b._CLASS_PREFIX;return d.config._callbacks=[],e[c.length?"show":"hide"](),"string"==typeof c?f=c:a.each(c,function(a,b){d.config._callbacks[a]=b.callback||"";var c=g+"-button"+(b.focus?" "+g+"-button-focus":"");f+='<a href="javascript:;" class="'+c+'" index="'+a+'">'+b.text+"</a>"}),e.html(f),d},j.size=function(a,b){this.DOM.content.css({width:a,height:b})},j.setStyle=function(a){return this.DOM.main.css(a)},j.center=function(){var a=this.DOM.main,b=this.config.fixed,c=a.width(),d=a.height(),e=g.height(),f={left:"50%","margin-left":-(.5*c)};f.top=b?"50%":.5*(e-d)+h.scrollTop(),f.marginTop=b?-(.5*d):0,f.position=b?"fixed":"absolute",this.__sProp={top:this.config.fixed?0:h.scrollTop(),opacity:0},this.__eProp={top:f.top,opacity:1},a.css(f)},j.position=function(){var b=this.config.align,c=a.isFunction(b)?b.call(this):b;a.isArray(c)&&c.length?this.setPos(c[0],c[1==c.length?0:1]):this.center()},j.setPos=function(a,b){return this.setStyle({left:a,top:b}),this},j.hide=function(){var a=this,b=a.config.effect,d=a.DOM.main;return a._visible=!1,"fade"===b?d.fadeOut(600):"fadeY"===b?d.animate(a.__sProp,600,function(){this.style.display="none"}):d.hide(),c(),a},j.show=function(){var b=this,d=b.config.effect,e=b.DOM.main;return b._visible=!0,"fade"===d?e.fadeIn(600):"fadeY"===d?(e.css(a.extend({},b.__sProp,{display:"block"})),e.animate(b.__eProp,600)):e.show(),c(),b},j.remove=function(){var a=this,b=a.DOM;b.main.off().remove(),c(),delete i[a.config.id]},j.addEventListener=function(a,b,c){this.DOM.main.on(a,b,c)},j.find=function(b){return a(b,this.DOM.main)},j._createPopup=function(){var c={},d=b._CLASS_PREFIX+"-",e={position:"fixed",border:"1px solid #cccccc","background-color":"#ffffff","z-index":8887,left:0,top:0,display:"none"},g=a('<div class="'+d+'main" />').css(e);a.each(["close","title","content","footer"],function(b,e){c[e]=a('<div class="'+d+e+'" />').appendTo(g)}),c.close.text("Ã—"),c.main=g.appendTo(f),this.DOM=c},j._attachEvents=function(){var a=this,c="."+b._CLASS_PREFIX+"-";a.addEventListener("click",c+"close",function(){a.hide()}),a.addEventListener("click",c+"button",function(){var b=this.getAttribute("index");a._trigger(b)})},j._trigger=function(a){var b=this.config._callbacks[a];return"function"!=typeof b||b.call(this)!==!1?this.hide():this},b._CLASS_PREFIX="x-popup",b._MASK=null,b._DEFAULTS={id:b._CLASS_PREFIX+"-default",title:"",content:"",button:[],align:[],mask:!1,fixed:!0,width:"auto",height:"auto",closeButton:!0,effect:""},b.create=function(c){var c="string"==typeof c?{content:c}:c,c=a.extend({},b._DEFAULTS,c),d=c.id||b._DEFAULTS.id,e=b.get(d)||(i[d]=new b);return c.id=d,e.init(c),e},b.get=function(a){return i[a]},b});
